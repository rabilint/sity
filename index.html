<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>

    .tabulator-col-content{
        background-color:#222;
        color:white;
    }
    .tabulator-table{
        border-top:solid 5px #3fb449;
        text-align:center;
    }
    .tabulator-col-title{
        text-align:center;
    }
    </style>
</head>

<body  >
    
   <div id="example-table"></div>
   <link href="dist/css/tabulator.min.css" rel="stylesheet">
   <script type="text/javascript" src="dist/js/tabulator.min.js"></script>
    <div id="usersTable"></div>
    
    <script>    
        //define some sample 
        let xhr = new XMLHttpRequest();
        const config = {

          tabledata : [],
        apiUrl : "https://mock-api.shpp.me/nmaiboroda/users "
      }
        async function getUsers(url) {

            try {
                let res = await fetch(url);
                return await res.json()
             } catch (error) {
                console.log(error);
            }
        }
        const foo = (data) => { console.log(data); drawtbl(data.data)}
        
        
        let dataUser = getUsers(config.apiUrl).then(data => foo(data))
        async function drawtbl(dataTBL){
            console.log(Object.keys(dataTBL));
            console.log(Object.values(dataTBL));

            var table = new Tabulator("#example-table", {
               height:500, 
               
               data:Object.values(dataTBL),

               layout:"fitColumns", //fit columns to width of table (optional)
               columns:[ //Define Table Columns
                 { title : "" ,  formatter : "rownum",width:10 },
                 {title: 'name', field: 'name'},
                 {title: 'second name', field: 'surname'},
                 {title: 'avatar', field: 'avatar',width:625},
                 {title: 'birthday', field: 'birthday'},
                 {formatter:"buttonCross", width:30, hozAlign:"center",cellClick:function(e, cell){
                 var row = cell.getRow()
                 var g = row.getPosition()
                 alert(g)
                 }},

               ],
           
            });
        }
    </script>
</body>
</html>