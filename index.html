<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>

    .tabulator-col-content{
        background-color:#222;
        color:white;
    }
    .tabulator-table{
        border-top:solid 5px #3fb449;
    }
    </style>
</head>

<body  >
    
   <div id="example-table"></div>
   <link href="dist/css/tabulator.min.css" rel="stylesheet">
   <script type="text/javascript" src="dist/js/tabulator.min.js"></script>
    <div id="usersTable"></div>
    
    <script>    
        //define some sample 
        let xhr = new XMLHttpRequest();
        const config = {

          tabledata : [],
        apiUrl : "https://mock-api.shpp.me/nmaiboroda/users "
      }
        async function getUsers(url) {

            try {
                let res = await fetch(url);
                return await res.json()
             } catch (error) {
                console.log(error);
            }
        }
        const foo = (data) => {
            console.log("foo", data)
            return config.tabledata = data;
            console.log(config.tabledata);
        }

        

        
        console.log(config.tabledata);
        var table = new Tabulator("#example-table", {
           height:130, // set heig of table (in CSS or here), this enables the Virtual DOM and improves render speed dramatically (can be any valid css height value)
          
           data:config.tabledata = getUsers(config.apiUrl).then(data => foo(data)),

           layout:"fitColumns", //fit columns to width of table (optional)
           columns:[ //Define Table Columns
             {title: 'Имя', field: 'name'},
                {title: 'Фамилия', field: 'surname'},
                {title: 'Возраст', field: 'age'},
           ],
           
        });

    </script>
</body>
</html>